{# Base layout #}
<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        {# Use title from front matter or provide a default #}
        <title>{{ title or "ESBD Visualization" }}</title>
        <link rel="icon" href="/img/favicon.ico" />

        {# Link to your CSS file (path relative to output site root) #}
        <link rel="stylesheet" href="/css/style.css" />

        {# KaTeX CSS & JS (Core + Auto-render) #}
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css"
            integrity="sha384-zh0CIslj+VczCZtlzBcjt5ppRcsAmDnRem7ESsYwWwg3m/OaJ2l4x7YBZl9Kxxib"
            crossorigin="anonymous"
        />
        <!-- The loading of KaTeX is deferred to speed up page rendering -->
        <script
            defer
            src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js"
            integrity="sha384-Rma6DA2IPUwhNxmrB/7S3Tno0YY7sFu9WSYMCuulLhIqYSGZ2gKCJWIqhBWqMQfh"
            crossorigin="anonymous"
        ></script>
        <!-- To automatically render math in text elements, include the auto-render extension: -->
        <script
            defer
            src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js"
            integrity="sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh"
            crossorigin="anonymous"
        ></script>

        {# KaTeX auto render hook - although we use markdown-it-katex, this
        catches any stragglers in e.g. html #}
        <script>
            // Optional: Customize KaTeX auto-render delimiters if needed
            document.addEventListener('DOMContentLoaded', function () {
                renderMathInElement(document.body, {
                    delimiters: [
                        { left: '$$', right: '$$', display: true },
                        { left: '$', right: '$', display: false },
                        { left: '\\(', right: '\\)', display: false },
                        { left: '\\[', right: '\\]', display: true },
                    ],
                    throwOnError: false,
                });
            });
        </script>

        {# D3 Library #}
        <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    </head>
    <body>
        <header>
            {# Optional: Add a consistent site header here #}
            <h1><a href="/esbd/">ESBD Visualizations</a></h1>
            <hr />
        </header>

        <main>
            {# Content from individual pages goes here #} {{ content | safe }}
        </main>

        <footer>
            <hr />
            {# Optional: Add a consistent site footer here #}
            <p><small>Made with 11ty, KaTeX, D3, and help from some LLMs.</small></p>
        </footer>
    </body>
</html>
